- [ ] Network [コマンドで理解するTCP/IP](https://www.amazon.co.jp/%E8%A9%A6%E3%81%9B%E3%81%B0%E3%82%8F%E3%81%8B%E3%82%8B-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%A7%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8BTCP-IP-%E8%B1%8A%E6%B2%A2-%E8%81%A1/dp/4756151442)
- [ ] Network [Linuxネットワークプログラミング:Geekなぺーじ](http://www.geekpage.jp/programming/linux-network/)

## Memo

### Part 1 P8

#### Words

- Ethernet: 通信技術の一種。
- FDDI(Fiber Distrubuted Data Interconnect): 通信技術の一種。光ファイバでコンピュータを数珠繋ぎにしてリングを構成するネットワーク。
- プロトコル: 共通規格。
- TCP(Transmission Control Protocol)
- IP(Internet Protocol): パケットを用いたネットワーク間通信を対象としたプロトコル。
- パケット: データ伝送の単位。
- ルータ: ネットワークの接続装置。
- IPアドレス: 2進数32ビット長でネットワークIDとホストIDを示すもの。例: 192.168.1.10
- ネットワークID: IPアドレスの前半部分。コンピュータの属するネットワークを示す。可変長。例: 24ビットの場合、192.168.1.10/24
- ホストID: IPアドレスの後半部分。ネットワーク内の各コンピュータを識別する番号。
- ネットワークアドレス: IPアドレスのホストIDを0で表したもの。例: 192.168.1.10/24なら192.168.1.0/24
- サブネットマスク: 2進数表記で、ネットワークID長を示すもの。11111111111111111111111100000000または255.255.255.0。
- DHCP(Dynamic Host Configuration Protocol)

#### Commands

```
$ ifconfig // IPアドレスなどを確認する
$ ifconfig -a
$ ping 192.168.2.3 // IPアドレス
```

#### Contents

##### インターネットとTCP/IP P9

- コンピュータの接続網をネットワーク。ネットワークとネットワークの接続網をインターネットと呼ぶ
- ネットワークを構成する技術にはEthernetやFDDIなど様々ある
- 共通の通信規格を用意し、それで通信することでネットワークをまとめる
- この共通規格がTCP/IP
- 送信する。とはパケットにメッセージや宛先などの情報を書き込んでネットワークに向けて送信すること
- 同じネットワークなら同じ通信技術を用いてパケットを直接伝達
- 別のネットワークならどちらも属するネットワークの接続装置(ルータ)にパケットを一旦送る
- ルータと同じネットワークにあるならパケットを転送
- 遠方のネットワークなら同じネットワークの別のルータへ転送
- IPには2つの機能が必要
  - 宛先のコンピュータとネットワークを識別する機能(IPアドレス)
  - パケットを目的の宛先に向けて正しい方角に転送する機能(ルーティング)

##### IPアドレス P11

- IPアドレスはインターネットを介する全てのコンピュータに付与される。
- フォーマットは2進数32ビット長。
- 人には理解しづらいため8bitでドット区切り、それぞれを10進数示す。例: 192.168.1.10
- 前半をネットワークIDといい、コンピュータの属するネットワークを指す。
- 後半をホストIDといい、ネットワーク内の各コンピュータを識別する番号。
- 前半(ネットワークID)を見れば同じネットワークか判定できる。電話の市外局番のようなもの。
- ネットワークIDが同じならコンピュータに直接。違えば、ルータにパケットを送信する。
- ネットワークIDは可変長である。収容台数に応じて変化させる。
- ネットワークIDとホストIDの区切りが可変長のため、CIDR表記などで補助情報として区切り位置を追記する。例: 24bit目の場合、192.168.1.10/24
- しかし、18bit目などだと10進数表記だと曖昧になる。そのため、ネットワークIDを示す場合、ホストIDを0と表記する。これをネットワークアドレスという。例: 192.168.1.10/24 → 192.168.1.0/24(ネットワークアドレス)
- 上記の計算は2進数に戻した上で行うのが容易だが、無駄が多いため、サブネットマスクを用いる。
- サブネットマスクは、ネットワークIDに1を、ホストIDに0を埋めたもの。例: 111111111111111111111100000000または255.255.255.0
- サブネットマスクでANDを取れば、ネットワークアドレスが得られる。
- IPアドレスなどの確認には `ifconfig` コマンドが、接続確認には `ping` コマンドが用いられる。

- - -

### Part 2 P20

#### Words

- デフォルトゲートウェイアドレス: ルータのIPアドレスのこと。ネットワークアドレスが違う場合の行先になる。
- 指定ブロードキャストアドレス: 特殊なアドレスの一つ。特定のネットワークの全コンピュータに同じパケットを送信する際に用いる。ホストIDを全て1とする。
- リミテッドブロードキャストアドレス: ネットワークIDを指定せずにブロードウェーするアドレス。物理的に自分のいるネットワークが対象になる。全て1となる。255.255.255.255。またケアしないとインターネット全体にブロードキャストするため、通常、ルータが遮断する。
- 不定アドレス: 自動設定のコンピュータは接続直後や起動直後、IPアドレスを持っていない。IPアドレスがない状態に用いられるIPアドレスを不定アドレスといい、全て0で表現する。0.0.0.0。
- ローカルループバックアドレス: 自分自身と通信するアドレス。127.0.0.1と定められている。ネットワークを介さずOSの中を回って元に戻される。

#### Commands

```
$ traceroute // ネットワークの経路を調査できる
```

#### Contents

##### デフォルトゲートウェイアドレスとは？ P20

- TCP/IP設定を行うというのは、IPアドレス、サブネットマスク、デフォルトゲートウェイを3点セットで設定することを意味する。
- デフォルトゲートウェイは外部に接続するルータに必要なものなので内部に閉じる場合は必要ない。スイッチングハブだけの場合など。

##### 特殊なアドレス P29

- 3点セットは自由に設定できるが、一部は特殊なアドレスとして使用できない。110番のように。

- - -

### Part 3 P32

#### Words

- Ethernet: ネットワーク構築技術。ハードウェア、パケット形式、アドレス体系などのプロトコルを規定している通信規格。
- カスケード接続: ポート数や距離の問題で、スイッチを相互連結し解決する接続を、カスケード接続という。
- MACアドレス: パケットの送信先アドレスのこと？

#### Commands

#### Contents

##### Ethernet P 32

- EthernetにはポートをハブやRJ45というコネクタを両端にもつケーブルを使用する。ケーブル内にはツイストペアと呼ばれる2本ずつを撚り合せた細線が2対または4対ある。シールドで遮蔽されたものとそうでないものがあり、遮蔽なしのツイストペアケーブルをUTP(Unshielded Twisted Pair)と略す。
- ハブには、スイッチングハブとシェアードハブがある。
- スイッチングハブは、電話交換機のような格子状の切り替え装置があり、ポート接続した任意の2台間で同時に通信できる。
- シェアードハブは、内部に共通回線を1本持ち、全コンピュータで共有する。そのため、1組の回線が使用している間、ほかの通信ができない。
- シェアードハブが安価だったが、今はスイッチングハブも安くなったため、ほとんどスイッチングハブが使われる。
- ツイストペアケーブルのは最大100mまでと決められている。
- ネットワークとネットワークを隔てるのはルータであるため、ルータを経由しない限り同じネットワークとして扱われる。
- スイッチはパケットの宛先を自動で学習する。
  - 起動直後、スイッチはアドレスとポートの対応は全く知らない。
  - 最初のパケットを受信すると、送信元アドレスと受信したポート番号から、まず1つ覚える。
  - だが、まだ宛先がどのポートかは不明である。
  - そこで受信ポート以外全てにパケットを送出する。これをフラッディングという。
  - これで1つは正しい宛先に届く。宛先でないパケットは破棄する。
  - これを繰り返しスイッチはすべてのポートと宛先を学習する。

## Questions

- MACアドレスとは...
- IPアドレスは何が振ってるの？
- パケットに宛先ってどうやって入ってるの

- - -

format

### Part ?

#### Words

#### Commands

#### Contents

